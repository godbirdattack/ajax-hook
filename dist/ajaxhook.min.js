!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)n[r]=e[r];return n.target=n.currentTarget=t,n}function o(e,t){function n(t){return function(){var n=this.hasOwnProperty(t+"_")?this[t+"_"]:this.xhr[t],r=(e[t]||{}).getter;return r&&r(n,this)||n}}function o(t){return function(n){var o=this.xhr,s=this,i=e[t];if("on"===t.substring(0,2))s[t+"_"]=n,o[t]=function(i){i=r(i,s),e[t]&&e[t].call(s,o,i)||n.call(s,i)};else{var u=(i||{}).setter;n=u&&u(n,s)||n,this[t+"_"]=n;try{o[t]=n}catch(e){}}}}function s(t){return function(){var n=[].slice.call(arguments);if(e[t]){var r=e[t].call(this,n,this.xhr);if(r)return r}return this.xhr[t].apply(this.xhr,n)}}return t=t||window,t[u]=t[u]||t.XMLHttpRequest,t.XMLHttpRequest=function(){for(var e=new t[u],r=0;r<a.length;++r){var c="on"+a[r];void 0===e[c]&&(e[c]=null)}for(var f in e){var h="";try{h=i(e[f])}catch(e){}"function"===h?this[f]=s(f):Object.defineProperty(this,f,{get:n(f),set:o(f),enumerable:!0})}var d=this;e.getProxy=function(){return d},this.xhr=e},Object.assign(t.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),t[u]}function s(e){e=e||window,e[u]&&(e.XMLHttpRequest=e[u]),e[u]=void 0}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.configEvent=r,t.hook=o,t.unHook=s;var u="__xhr",a=t.events=["load","loadend","timeout","error","readystatechange","abort"]},function(e,t,n){"use strict";function r(e,t){if(t=t||window,t.__xhr)throw"Ajax is already hooked.";return h(e,t)}function o(e){(0,d.unHook)(e)}function s(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return e.watcher||(e.watcher=document.createElement("a"))}function u(e,t){var n=e.getProxy(),r="on"+t+"_",o=(0,d.configEvent)({type:t},n);n[r]&&n[r](o);var s;"function"==typeof Event?s=new Event(t,{bubbles:!1}):(s=document.createEvent("Event"),s.initEvent(t,!1,!0)),i(e).dispatchEvent(s)}function a(e){this.xhr=e,this.xhrProxy=e.getProxy()}function c(e){function t(e){a.call(this,e)}return t[b]=Object.create(a[b]),t[b].next=e,t}function f(e){return null!=e.response||""!==e.responseType&&"text"!==e.responseType?e.response:e.responseText}function h(e,t){function n(e,t){var n=new E(e),r={response:f(t),status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce(function(e,t){if(""===t)return e;var n=t.split(":");return e[n.shift()]=s(n.join(":")),e},{})};if(!v)return n.resolve(r);v(r,n)}function r(e,t,n,r){var o=new m(e);n={config:e.config,error:n,type:r},l?l(n,o):o.next(n)}function o(){return!0}function a(e){return function(t,n){return r(t,this,n,e),!0}}function c(e,t){return 4===e.readyState&&0!==e.status?n(e,t):4!==e.readyState&&u(e,x),!0}var h=e.onRequest,v=e.onResponse,l=e.onError;return(0,d.hook)({onload:o,onloadend:o,onerror:a(y),ontimeout:a(p),onabort:a(g),onreadystatechange:function(e){return c(e,this)},open:function(e,t){var n=this,r=t.config={headers:{}};r.method=e[0],r.url=e[1],r.async=e[2],r.user=e[3],r.password=e[4],r.xhr=t;var o="on"+x;if(t[o]||(t[o]=function(){return c(t,n)}),h)return!0},send:function(e,t){var n=t.config;if(n.withCredentials=t.withCredentials,n.body=e[0],h){var r=function(){h(n,new w(t))};return!1===n.async?r():setTimeout(r),!0}},setRequestHeader:function(e,t){if(t.config.headers[e[0].toLowerCase()]=e[1],h)return!0},addEventListener:function(e,t){var n=this;if(-1!==d.events.indexOf(e[0])){var r=e[1];return i(t).addEventListener(e[0],function(t){var o=(0,d.configEvent)(t,n);o.type=e[0],o.isTrusted=!0,r.call(n,o)}),!0}},getAllResponseHeaders:function(e,t){var n=t.resHeader;if(n){var r="";for(var o in n)r+=o+": "+n[o]+"\r\n";return r}},getResponseHeader:function(e,t){var n=t.resHeader;if(n)return n[(e[0]||"").toLowerCase()]}},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.proxy=r,t.unProxy=o;var d=n(0),v=d.events[0],l=d.events[1],p=d.events[2],y=d.events[3],x=d.events[4],g=d.events[5],b="prototype";a[b]=Object.create({resolve:function(e){var t=this.xhrProxy,n=this.xhr;t.readyState=4,n.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,u(n,x),u(n,v),u(n,l)},reject:function(e){this.xhrProxy.status=0,u(this.xhr,e.type),u(this.xhr,l)}});var w=c(function(e){var t=this.xhr;e=e||t.config,t.withCredentials=e.withCredentials,t.open(e.method,e.url,!1!==e.async,e.user,e.password);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);t.send(e.body)}),E=c(function(e){this.resolve(e)}),m=c(function(e){this.reject(e)})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ah=void 0;var r=n(0),o=n(1);t.ah={proxy:o.proxy,unProxy:o.unProxy,hook:r.hook,unHook:r.unHook}}]));
//# sourceMappingURL=ajaxhook.min.js.map